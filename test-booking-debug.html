<!DOCTYPE html>
<html>
<head>
    <title>Booking Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .price-display { font-size: 20px; font-weight: bold; color: #28a745; }
        select, button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <h1>üß™ Booking System Debug Test</h1>
    
    <div class="debug-section">
        <h3>Service Selection Test</h3>
        <label for="service">Select Service:</label>
        <select id="service" name="service">
            <option value="">Select a service</option>
            <option value="mindful-start" data-price="70">Mindful Start - Starting at $70</option>
            <option value="integrated-massage" data-price="100">Integrated Massage - $100+</option>
            <option value="thai-stretch" data-price="120">Thai-Stretch Fusion - $120+</option>
            <option value="applied-neurology" data-price="150">Applied Neurology Consultation - $150+</option>
            <option value="prenatal" data-price="90">Prenatal Massage - $90</option>
            <option value="neurology-training" data-price="330">Applied Neurology Training - Up to $330</option>
        </select>
        
        <div class="price-display">
            Total: $<span id="totalPrice">0</span>
        </div>
    </div>
    
    <div class="debug-section">
        <h3>Price Calculation Test</h3>
        <button onclick="testPriceCalculation()">Test Price Calculation</button>
        <button onclick="testFormData()">Test Form Data Extraction</button>
        <button onclick="clearCache()">Clear Cache & Reload</button>
        <div id="debugOutput"></div>
    </div>

    <script src="js/modules/booking/booking-form-handler.js"></script>
    <script>
        // Test price updates
        const serviceSelect = document.getElementById('service');
        const priceSpan = document.getElementById('totalPrice');
        
        function updatePrice() {
            const selectedOption = serviceSelect.options[serviceSelect.selectedIndex];
            const price = selectedOption.getAttribute('data-price') || '0';
            priceSpan.textContent = price;
            console.log('üí∞ Price updated to:', price, 'for service:', selectedOption.text);
            
            // Update debug output
            document.getElementById('debugOutput').innerHTML += 
                `<p>‚úÖ Service: ${selectedOption.text} ‚Üí Price: $${price}</p>`;
        }
        
        serviceSelect.addEventListener('change', updatePrice);
        
        function testPriceCalculation() {
            if (window.bookingFormHandler) {
                const price = window.bookingFormHandler.calculateServicePrice();
                document.getElementById('debugOutput').innerHTML += 
                    `<p>üß™ Calculated Price: $${price}</p>`;
            } else {
                document.getElementById('debugOutput').innerHTML += 
                    `<p>‚ùå BookingFormHandler not available</p>`;
            }
        }
        
        function testFormData() {
            if (window.bookingFormHandler) {
                const formData = window.bookingFormHandler.extractFormData();
                document.getElementById('debugOutput').innerHTML += 
                    `<p>üìã Form Data: ${JSON.stringify(formData, null, 2)}</p>`;
            } else {
                document.getElementById('debugOutput').innerHTML += 
                    `<p>‚ùå BookingFormHandler not available</p>`;
            }
        }
        
        function clearCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                }).then(() => {
                    localStorage.clear();
                    sessionStorage.clear();
                    location.reload(true);
                });
            } else {
                localStorage.clear();
                sessionStorage.clear();
                location.reload(true);
            }
        }
        
        // Log when script loads
        console.log('üß™ Debug test page loaded');
        document.getElementById('debugOutput').innerHTML = '<p>üöÄ Debug test ready</p>';
    </script>
</body>
</html>