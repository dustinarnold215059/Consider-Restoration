<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider Restoration - Christopher Rembisz, LMT | Pain Relief & Body Restoration</title>
    <meta name="description" content="Professional massage therapy in Livonia, MI. Specializing in pain management, applied neurology, and therapeutic bodywork. Book your session today.">
    <meta name="keywords" content="massage therapy, pain relief, Livonia MI, applied neurology, therapeutic bodywork, Christopher Rembisz">
    <meta name="author" content="Christopher Rembisz, LMT">
    <meta property="og:title" content="Consider Restoration - Christopher Rembisz, LMT">
    <meta property="og:description" content="Because Pain Shouldn't Be Your Normal. Professional massage therapy and body restoration in Livonia, MI.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://considerrestoration.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/image-placeholders.css">
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#3A7D99">
    
    <!-- Google Analytics - Temporarily disabled for testing -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX', {
            page_title: 'Home - Consider Restoration',
            page_location: window.location.href
        });
        
        // Track booking button clicks
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('a[href*="booking"]').forEach(link => {
                link.addEventListener('click', function() {
                    gtag('event', 'click', {
                        event_category: 'Booking',
                        event_label: 'Book Appointment CTA',
                        value: 1
                    });
                });
            });
        });
    </script>
    -->
    
    <!-- Browser compatibility polyfills (load first) -->
    <script src="js/browser-compatibility.js"></script>
    <script src="js/logger.js"></script>
    <script src="js/secure-session.js"></script>
    <script src="js/production-logger.js"></script>
    
    <!-- Utility scripts -->
    <script src="js/site-config.js"></script>
    <script src="js/logging-utility.js"></script>
    <script src="js/environment-config.js"></script>
    <script src="js/toast-notifications.js"></script>
    
    <!-- Ultra-minimal scripts for home page performance -->
    <script src="js/lazy-loading.js" defer></script>
    <script src="js/cookie-session-manager.js"></script>
    <script src="js/navigation-handler.js"></script>
    
    <!-- Local Business Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "@id": "https://considerrestoration.com",
        "name": "Consider Restoration",
        "alternateName": "Consider Restoration Massage Therapy",
        "description": "Professional massage therapy and bodywork services specializing in pain management, applied neurology, and therapeutic treatments in Livonia, MI.",
        "url": "https://considerrestoration.com",
        "telephone": "(734) 419-4116",
        "email": "info@considerrestoration.com",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "123 Main Street",
            "addressLocality": "Livonia",
            "addressRegion": "MI",
            "postalCode": "48150",
            "addressCountry": "US"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": "42.3684",
            "longitude": "-83.3532"
        },
        "areaServed": [
            {
                "@type": "City",
                "name": "Livonia",
                "containedInPlace": {
                    "@type": "State",
                    "name": "Michigan"
                }
            },
            {
                "@type": "City",
                "name": "Plymouth",
                "containedInPlace": {
                    "@type": "State", 
                    "name": "Michigan"
                }
            },
            {
                "@type": "City",
                "name": "Canton",
                "containedInPlace": {
                    "@type": "State",
                    "name": "Michigan"
                }
            },
            {
                "@type": "City",
                "name": "Westland",
                "containedInPlace": {
                    "@type": "State",
                    "name": "Michigan"
                }
            },
            {
                "@type": "City",
                "name": "Farmington Hills",
                "containedInPlace": {
                    "@type": "State",
                    "name": "Michigan"
                }
            }
        ],
        "openingHours": [
            "Mo-Fr 09:00-18:00",
            "Sa 09:00-15:00"
        ],
        "priceRange": "$70-$330",
        "currenciesAccepted": "USD",
        "paymentAccepted": "Cash, Credit Card, Debit Card, Online Payment",
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Massage Therapy Services",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Mindful Start Massage",
                        "description": "Personalized bodywork session combining massage techniques tailored to your specific needs.",
                        "category": "Massage Therapy"
                    },
                    "price": "70.00",
                    "priceCurrency": "USD"
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Integrated Massage",
                        "description": "Comprehensive bodywork addressing multiple concerns with various modalities.",
                        "category": "Massage Therapy"
                    },
                    "price": "100.00",
                    "priceCurrency": "USD"
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Thai-Stretch Fusion",
                        "description": "Dynamic stretching combined with massage for improved mobility and flexibility.",
                        "category": "Bodywork"
                    },
                    "price": "120.00",
                    "priceCurrency": "USD"
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Applied Neurology Consultation",
                        "description": "Specialized assessment and treatment using neurology-based techniques.",
                        "category": "Consultation"
                    },
                    "price": "150.00",
                    "priceCurrency": "USD"
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Prenatal Massage",
                        "description": "Safe, gentle massage therapy specifically designed for expecting mothers.",
                        "category": "Specialty Massage"
                    },
                    "price": "90.00",
                    "priceCurrency": "USD"
                }
            ]
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "reviewCount": "47",
            "bestRating": "5",
            "worstRating": "1"
        },
        "review": [
            {
                "@type": "Review",
                "author": {
                    "@type": "Person",
                    "name": "Sarah M."
                },
                "reviewRating": {
                    "@type": "Rating",
                    "ratingValue": "5",
                    "bestRating": "5"
                },
                "reviewBody": "Christopher's expertise in applied neurology changed my life. After months of chronic pain, I finally found relief through his specialized techniques."
            },
            {
                "@type": "Review",
                "author": {
                    "@type": "Person",
                    "name": "Jennifer K."
                },
                "reviewRating": {
                    "@type": "Rating",
                    "ratingValue": "5",
                    "bestRating": "5"
                },
                "reviewBody": "The prenatal massage sessions helped me through my entire pregnancy. Christopher is incredibly knowledgeable and made me feel completely comfortable."
            },
            {
                "@type": "Review",
                "author": {
                    "@type": "Person",
                    "name": "Mike R."
                },
                "reviewRating": {
                    "@type": "Rating",
                    "ratingValue": "5",
                    "bestRating": "5"
                },
                "reviewBody": "The online booking system is so convenient, and the results speak for themselves. Best therapeutic massage I've ever had."
            }
        ],
        "makesOffer": [
            {
                "@type": "Offer",
                "name": "Online Appointment Booking",
                "description": "Convenient online booking system available 24/7"
            },
            {
                "@type": "Offer",
                "name": "Membership Programs",
                "description": "Flexible membership programs with discounted rates and priority booking"
            },
            {
                "@type": "Offer",
                "name": "Gift Certificates",
                "description": "Digital gift certificates available for purchase online"
            }
        ],
        "founder": {
            "@type": "Person",
            "name": "Christopher Rembisz",
            "jobTitle": "Licensed Massage Therapist",
            "description": "Licensed Massage Therapist specializing in pain management and applied neurology techniques.",
            "knowsAbout": [
                "Massage Therapy",
                "Applied Neurology",
                "Pain Management",
                "Therapeutic Bodywork",
                "Prenatal Massage",
                "Thai Massage",
                "Myofascial Release"
            ]
        },
        "sameAs": [
            "https://www.facebook.com/considerrestoration",
            "https://www.instagram.com/considerrestoration",
            "https://www.linkedin.com/in/christopher-rembisz"
        ],
        "image": "https://considerrestoration.com/images/hero-massage-therapy.jpg",
        "logo": "https://considerrestoration.com/images/logo.png"
    }
    </script>

    <!-- Professional Service Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "Consider Restoration Massage Therapy",
        "description": "Professional massage therapy services focusing on pain relief and body restoration through specialized techniques.",
        "provider": {
            "@type": "Person",
            "name": "Christopher Rembisz",
            "jobTitle": "Licensed Massage Therapist"
        },
        "areaServed": {
            "@type": "State",
            "name": "Michigan"
        },
        "availableService": [
            {
                "@type": "MedicalTherapy",
                "name": "Therapeutic Massage",
                "description": "Professional massage therapy for pain relief and wellness"
            },
            {
                "@type": "MedicalTherapy", 
                "name": "Applied Neurology",
                "description": "Specialized neurology-based assessment and treatment"
            },
            {
                "@type": "MedicalTherapy",
                "name": "Prenatal Massage",
                "description": "Safe massage therapy for expecting mothers"
            }
        ]
    }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Consider Restoration",
        "url": "https://considerrestoration.com",
        "logo": "https://considerrestoration.com/images/logo.png",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "(734) 419-4116",
            "contactType": "customer service",
            "availableLanguage": "English"
        },
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "123 Main Street",
            "addressLocality": "Livonia",
            "addressRegion": "MI",
            "postalCode": "48150",
            "addressCountry": "US"
        }
    }
    </script>

    <!-- Website Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Consider Restoration",
        "url": "https://considerrestoration.com",
        "description": "Professional massage therapy and body restoration services in Livonia, MI"
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="logo">Consider Restoration</h1>
                <ul class="nav-menu">
                    <li><a href="index.html" class="active">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="membership.html">Membership</a></li>
                    <li><a href="booking.html">Book Appointment</a></li>
                    <li><a href="reviews.html">Reviews</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="user-portal.html" id="accountNavLink">Login</a></li>
                    <li id="adminNavLink" style="display: none;"><a href="admin.html">Admin</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section id="home" class="hero">
            <div class="hero-content">
                <h2>Because Pain Shouldn't Be Your Normal</h2>
                <p>Pain relief and body restoration through specialized massage and bodywork</p>
                <a href="booking.html" class="cta-button">Book Your Session</a>
            </div>
        </section>
        
        <section class="home-preview">
            <div class="container">
                <div class="preview-grid">
                    <div class="preview-card">
                        <h3>About Christopher</h3>
                        <p>Licensed Massage Therapist specializing in pain management and applied neurology techniques.</p>
                        <a href="about.html" class="preview-link">Learn More →</a>
                    </div>
                    <div class="preview-card">
                        <h3>Services</h3>
                        <p>From mindful bodywork to specialized neurology consultations, find the right treatment for you.</p>
                        <a href="services.html" class="preview-link">View Services →</a>
                    </div>
                    <div class="preview-card">
                        <h3>Membership</h3>
                        <p>Save money and prioritize your wellness with our flexible membership programs.</p>
                        <a href="membership.html" class="preview-link">Join Today →</a>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="testimonials">
            <div class="container">
                <h2>What Our Clients Say</h2>
                <div class="testimonials-grid" id="testimonialsGrid">
                    <!-- Reviews will be populated here dynamically -->
                    <div class="testimonial-card placeholder">
                        <div class="testimonial-content">
                            <p>Loading client reviews...</p>
                        </div>
                        <div class="testimonial-author">
                            <strong>Please wait</strong>
                            <span>Loading</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Consider Restoration - Christopher Rembisz, LMT. All rights reserved.</p>
        </div>
    </footer>

    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Complete Your Payment</h3>
            <div id="card-element"></div>
            <div id="card-errors" role="alert"></div>
            <button id="submit-payment">Pay Now</button>
        </div>
    </div>

    <div id="loginPromptModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginPrompt()">&times;</span>
            <h3>Login Required</h3>
            <div class="login-prompt-content">
                <p>You need to be logged in to book an appointment.</p>
                <div class="login-prompt-buttons">
                    <button class="btn-primary" onclick="goToLogin()">Login to Existing Account</button>
                    <button class="btn-secondary" onclick="goToRegister()">Create New Account</button>
                </div>
                <p class="login-note">Your booking information will be saved and restored after you login or register.</p>
            </div>
        </div>
    </div>

    <!-- Home page doesn't need booking scripts -->
    <script>
        // Load and display testimonials (simplified to prevent performance issues)
        function loadTestimonials() {
            try {
                const testimonialsGrid = document.getElementById('testimonialsGrid');
                if (!testimonialsGrid) return;
            
            // Just use fallback reviews to prevent any complex loading issues
            let reviews = [];
            
            // Default fallback reviews if no real reviews exist
            const fallbackReviews = [
                {
                    id: 'fallback1',
                    name: 'Sarah M.',
                    rating: 5,
                    review: 'Christopher\'s expertise in applied neurology changed my life. After months of chronic pain, I finally found relief through his specialized techniques.',
                    service: 'Chronic Pain Relief'
                },
                {
                    id: 'fallback2',
                    name: 'Jennifer K.',
                    rating: 5,
                    review: 'The prenatal massage sessions helped me through my entire pregnancy. Christopher is incredibly knowledgeable and made me feel completely comfortable.',
                    service: 'Prenatal Massage'
                },
                {
                    id: 'fallback3',
                    name: 'Mike R.',
                    rating: 5,
                    review: 'The online booking system is so convenient, and the results speak for themselves. Best therapeutic massage I\'ve ever had.',
                    service: 'Sports Recovery'
                }
            ];
            
            // Simple approach - just show fallback reviews
            const topReviews = fallbackReviews;
            
            // Generate testimonial HTML
            const testimonialsHTML = topReviews.map(review => {
                const stars = '⭐'.repeat(review.rating);
                const displayName = review.name || 'Anonymous';
                const serviceType = review.service || 'Massage Therapy';
                
                return `
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <p>"${review.review}"</p>
                        </div>
                        <div class="testimonial-author">
                            <strong>${displayName}</strong>
                            <span>${serviceType}</span>
                        </div>
                        <div class="testimonial-rating">${stars}</div>
                    </div>
                `;
            }).join('');
            
            testimonialsGrid.innerHTML = testimonialsHTML;
            } catch (error) {
                console.error('Error in loadTestimonials:', error);
                // Provide fallback content if testimonials fail to load
                const testimonialsGrid = document.getElementById('testimonialsGrid');
                if (testimonialsGrid) {
                    testimonialsGrid.innerHTML = '<p>Testimonials temporarily unavailable.</p>';
                }
            }
        }
        
        // Check for user authentication and update navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Simple testimonials loading - no retry mechanism to prevent blocking
            setTimeout(() => {
                try {
                    loadTestimonials();
                } catch (error) {
                    console.error('Error loading testimonials:', error);
                }
            }, 500);
            
            // Navigation will be handled by SimpleSessionManager
            window.addEventListener('userAuthChanged', function(event) {
                console.log('🔐 User auth changed in index page');
            });
        });
    </script>

    <!-- Service Worker Registration -->
    <script>
        // Register service worker for offline functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('🚀 Service Worker registered successfully:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', function() {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', function() {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New version available
                                    if (confirm('New version available! Reload to update?')) {
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch(function(error) {
                        console.log('❌ Service Worker registration failed:', error);
                    });
            });
        } else {
            console.log('Service Worker not supported');
        }

        // Handle install prompt for PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', function(e) {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button or banner
            const installButton = document.createElement('button');
            installButton.textContent = 'Install App';
            installButton.className = 'pwa-install-button show';
            
            installButton.addEventListener('click', function() {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(function(choiceResult) {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    }
                    deferredPrompt = null;
                    installButton.remove();
                });
            });
            
            document.body.appendChild(installButton);
            
            // Auto-hide after 10 seconds
            setTimeout(function() {
                if (installButton.parentNode) {
                    installButton.remove();
                }
            }, 10000);
        });
    </script>
</body>
</html>