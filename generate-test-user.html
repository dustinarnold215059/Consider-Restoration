<!DOCTYPE html>
<html>
<head>
    <title>Generate Test User</title>
    <script src="https://cdn.jsdelivr.net/npm/bcryptjs@2.4.3/dist/bcrypt.min.js"></script>
</head>
<body>
    <h1>Generate Working Test User</h1>
    <button onclick="generateTestUser()">Generate Bcrypt Hash for test123</button>
    <div id="result"></div>
    
    <script>
        function generateTestUser() {
            setTimeout(() => {
                if (typeof dcodeIO !== 'undefined' && dcodeIO.bcrypt) {
                    console.log('Bcrypt available, generating hash...');
                    
                    try {
                        const salt = dcodeIO.bcrypt.genSaltSync(12);
                        const hash = dcodeIO.bcrypt.hashSync('test123', salt);
                        
                        console.log('Generated hash:', hash);
                        
                        // Verify it works
                        const verification = dcodeIO.bcrypt.compareSync('test123', hash);
                        console.log('Verification:', verification);
                        
                        document.getElementById('result').innerHTML = `
                            <h3>Generated Test User:</h3>
                            <pre>
{
    id: 999,
    username: 'test@test.com',
    passwordHash: '${hash}',
    name: 'Test User',
    email: 'test@test.com',
    phone: '(555) 999-0000',
    role: 'user'
}

Verification: ${verification ? '✅ SUCCESS' : '❌ FAILED'}
                            </pre>
                        `;
                        
                    } catch (error) {
                        console.error('Error:', error);
                        document.getElementById('result').innerHTML = 'Error: ' + error.message;
                    }
                } else {
                    document.getElementById('result').innerHTML = 'Bcrypt not available';
                }
            }, 1000);
        }
        
        // Auto-generate
        setTimeout(generateTestUser, 1500);
    </script>
</body>
</html>